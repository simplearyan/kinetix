---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar.astro";
import CtaSection from "../../components/CtaSection.astro";
import { ChevronLeft } from "lucide-react";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: post,
    }));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} - Kinetix Blog`}>
    <Navbar />
    <main class="min-h-screen bg-white pt-32 pb-24">
        <article class="container mx-auto px-6 max-w-3xl">
            {/* Back Link */}
            <a
                href="/blog"
                class="inline-flex items-center text-slate-500 hover:text-blue-600 mb-8 transition-colors text-sm font-medium"
            >
                <ChevronLeft size={16} class="mr-1" />
                Back to Blog
            </a>

            {/* Header */}
            <header class="mb-12 text-center">
                <div class="flex justify-center gap-2 mb-6">
                    {
                        post.data.tags?.map((tag) => (
                            <span class="text-xs font-semibold px-2 py-1 bg-blue-100 text-blue-600 rounded-full uppercase tracking-wider">
                                {tag}
                            </span>
                        ))
                    }
                </div>
                <h1
                    class="text-4xl md:text-5xl font-bold text-slate-900 mb-6 leading-tight font-display"
                >
                    {post.data.title}
                </h1>
                <div class="text-slate-500 text-sm">
                    {
                        post.data.pubDate.toLocaleDateString("en-US", {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                        })
                    }
                    <span class="mx-2">â€¢</span>
                    {post.data.author}
                </div>
            </header>

            {/* Featured Image */}
            {
                post.data.image && (
                    <div class="rounded-2xl overflow-hidden mb-12 shadow-lg">
                        <img
                            src={post.data.image}
                            alt={post.data.title}
                            class="w-full h-auto object-cover"
                        />
                    </div>
                )
            }

            {/* Content */}
            <div class="prose mx-auto">
                <Content />
            </div>
        </article>

        <CtaSection />
    </main>
</Layout>

<style>
    .font-display {
        font-family: "Outfit", sans-serif;
    }
</style>
