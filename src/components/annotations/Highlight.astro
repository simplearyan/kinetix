---
interface Props {
    color?: string;
    class?: string;
}

const { color = "yellow", class: className } = Astro.props;

const highlightColors: Record<string, string> = {
    yellow: "rgba(255, 255, 0, 0.5)",
    green: "rgba(0, 255, 0, 0.4)",
    pink: "rgba(255, 105, 180, 0.4)",
    blue: "rgba(0, 191, 255, 0.4)",
};

const bg = highlightColors[color] || color;
---

<span
    class={`vox-highlight ${className || ""}`}
    style={`--highlight-color: ${bg};`}
>
    <slot />
</span>

<style>
    .vox-highlight {
        background: linear-gradient(
            100deg,
            rgba(255, 255, 255, 0) 0%,
            rgba(255, 255, 255, 0) 5%,
            var(--highlight-color) 7%,
            var(--highlight-color) 92%,
            rgba(255, 255, 255, 0) 95%
        );
        background-size: 100% 80%;
        background-repeat: no-repeat;
        background-position: 0 85%;
        padding: 0.1em 0.2em;
        border-radius: 4px;
        box-decoration-break: clone;
        -webkit-box-decoration-break: clone;
        font-weight: 500;
    }

    :global([data-theme="dark"]) .vox-highlight {
        mix-blend-mode: hard-light;
    }
</style>
